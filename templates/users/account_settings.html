{% extends 'base.html' %}

{% block title %}Account Settings - {{ user.username }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0">
                        <i class="fas fa-cog"></i> Account Settings
                    </h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <!-- Profile Management -->
                        <div class="col-md-6 mb-4">
                            <div class="setting-card">
                                <div class="setting-icon">
                                    <i class="fas fa-user-circle fa-3x text-primary"></i>
                                </div>
                                <h5>Profile</h5>
                                <p class="text-muted">Update your personal information, bio, and contact details.</p>
                                <div class="mt-3">
                                    <a href="{% url 'profile' %}" class="btn btn-outline-primary btn-sm mr-2">
                                        <i class="fas fa-eye"></i> View Profile
                                    </a>
                                    <a href="{% url 'profile_edit' %}" class="btn btn-primary btn-sm">
                                        <i class="fas fa-edit"></i> Edit Profile
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Password Management -->
                        <div class="col-md-6 mb-4">
                            <div class="setting-card">
                                <div class="setting-icon">
                                    <i class="fas fa-key fa-3x text-warning"></i>
                                </div>
                                <h5>Password</h5>
                                <p class="text-muted">Change your password to keep your account secure.</p>
                                <div class="mt-3">
                                    <a href="{% url 'change_password' %}" class="btn btn-warning btn-sm">
                                        <i class="fas fa-key"></i> Change Password
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Profile Picture -->
                        <div class="col-md-6 mb-4">
                            <div class="setting-card">
                                <div class="setting-icon">
                                    <i class="fas fa-camera fa-3x text-success"></i>
                                </div>
                                <h5>Profile Picture</h5>
                                <p class="text-muted">Upload or change your profile picture.</p>
                                <div class="mt-3">
                                    {% if user.profile.profile_pic %}
                                        <a href="{% url 'delete_profile_picture' %}" class="btn btn-outline-danger btn-sm mr-2"
                                           onclick="return confirm('Are you sure you want to delete your profile picture?')">
                                            <i class="fas fa-trash"></i> Remove
                                        </a>
                                    {% endif %}
                                    <a href="{% url 'profile_edit' %}#profile-picture" class="btn btn-success btn-sm">
                                        <i class="fas fa-upload"></i> Upload New
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Account Information -->
                        <div class="col-md-6 mb-4">
                            <div class="setting-card">
                                <div class="setting-icon">
                                    <i class="fas fa-info-circle fa-3x text-info"></i>
                                </div>
                                <h5>Account Info</h5>
                                <p class="text-muted">View your account details and activity.</p>
                                <div class="mt-3">
                                    <small class="text-muted">
                                        <strong>Member since:</strong> {{ user.date_joined|date:"F Y" }}<br>
                                        <strong>Last login:</strong> {{ user.last_login|date:"M d, Y"|default:"Never" }}
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <hr>
                    
                    <!-- Quick Actions -->
                    <div class="row">
                        <div class="col-12">
                            <h5 class="mb-3">Quick Actions</h5>
                            <div class="btn-group" role="group" aria-label="Quick actions">
                                <a href="{% url 'chat_redirect' %}" class="btn btn-outline-primary">
                                    <i class="fas fa-comments"></i> Go to Chat
                                </a>
                                <a href="{% url 'logout' %}" class="btn btn-outline-danger">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.card {
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    border: 1px solid rgba(0, 0, 0, 0.125);
}

.card-header {
    background-color: #f8f9fa;
    border-bottom: 1px solid rgba(0, 0, 0, 0.125);
}

.setting-card {
    text-align: center;
    padding: 1.5rem;
    border: 1px solid #dee2e6;
    border-radius: 0.5rem;
    background-color: #f8f9fa;
    height: 100%;
    transition: transform 0.2s ease-in-out;
}

.setting-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

.setting-icon {
    margin-bottom: 1rem;
}

.btn-group .btn {
    margin-right: 0.5rem;
}

.btn-group .btn:last-child {
    margin-right: 0;
}

.fa, .fas {
    margin-right: 0.5rem;
}

hr {
    border-top: 1px solid #dee2e6;
    margin: 2rem 0;
}

@media (max-width: 768px) {
    .setting-card {
        margin-bottom: 1rem;
    }
    
    .btn-group {
        display: flex;
        flex-direction: column;
    }
    
    .btn-group .btn {
        margin-right: 0;
        margin-bottom: 0.5rem;
    }
}
</style>
{% endblock %}
